(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){function n(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n])}function r(e,t){if(!Array.prototype.indexOf){var n=e.length;while(n--){if(e[n]===t){return true}}return false}return e.indexOf(t)!=-1}function i(n,r,i,s){var o=n.getCursor(),u=i(n,o),a=u;if(/\b(?:string|comment)\b/.test(u.type))return;u.state=e.innerMode(n.getMode(),u.state).state;if(!/^[\w$_]*$/.test(u.string)){u=a={start:o.ch,end:o.ch,string:"",state:u.state,type:u.string=="."?"property":null}}while(a.type=="property"){a=i(n,t(o.line,a.start));if(a.string!=".")return;a=i(n,t(o.line,a.start));if(!f)var f=[];f.push(a)}return{list:p(u,f,r,s),from:t(o.line,u.start),to:t(o.line,u.end)}}function s(e,t){return i(e,c,function(e,t){return e.getTokenAt(t)},t)}function o(e,t){var n=e.getTokenAt(t);if(t.ch==n.start+1&&n.string.charAt(0)=="."){n.end=n.start;n.string=".";n.type="property"}else if(/^\.[\w$_]*$/.test(n.string)){n.type="property";n.start++;n.string=n.string.replace(/\./,"")}return n}function u(e,t){return i(e,h,o,t)}function p(e,t,i,s){function c(e){if(e.lastIndexOf(u,0)==0&&!r(o,e))o.push(e)}function h(e){if(typeof e=="string")n(a,c);else if(e instanceof Array)n(f,c);else if(e instanceof Function)n(l,c);for(var t in e)c(t)}var o=[],u=e.string;if(t&&t.length){var p=t.pop(),d;if(p.type&&p.type.indexOf("variable")===0){if(s&&s.additionalContext)d=s.additionalContext[p.string];d=d||window[p.string]}else if(p.type=="string"){d=""}else if(p.type=="atom"){d=1}else if(p.type=="function"){if(window.jQuery!=null&&(p.string=="$"||p.string=="jQuery")&&typeof window.jQuery=="function")d=window.jQuery();else if(window._!=null&&p.string=="_"&&typeof window._=="function")d=window._()}while(d!=null&&t.length)d=d[t.pop().string];if(d!=null)h(d)}else{for(var v=e.state.localVars;v;v=v.next)c(v.name);for(var v=e.state.globalVars;v;v=v.next)c(v.name);h(window);n(i,c)}return o}var t=e.Pos;e.registerHelper("hint","javascript",s);e.registerHelper("hint","coffeescript",u);var a=("charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight "+"toUpperCase toLowerCase split concat match replace search").split(" ");var f=("length concat join splice push pop shift unshift slice reverse sort indexOf "+"lastIndexOf every some filter forEach map reduce reduceRight ").split(" ");var l="prototype apply call bind".split(" ");var c=("break case catch continue debugger default delete do else false finally for function "+"if in instanceof new null return switch throw true try typeof var void while with").split(" ");var h=("and break catch class continue delete do else extends false finally for "+"if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes").split(" ")})