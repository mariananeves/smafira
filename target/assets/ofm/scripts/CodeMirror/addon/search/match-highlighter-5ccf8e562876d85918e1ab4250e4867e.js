(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";function i(e){if(typeof e=="object"){this.minChars=e.minChars;this.style=e.style;this.showToken=e.showToken;this.delay=e.delay}if(this.style==null)this.style=n;if(this.minChars==null)this.minChars=t;if(this.delay==null)this.delay=r;this.overlay=this.timeout=null}function s(e){var t=e.state.matchHighlighter;clearTimeout(t.timeout);t.timeout=setTimeout(function(){o(e)},t.delay)}function o(e){e.operation(function(){var t=e.state.matchHighlighter;if(t.overlay){e.removeOverlay(t.overlay);t.overlay=null}if(!e.somethingSelected()&&t.showToken){var n=t.showToken===true?/[\w$]/:t.showToken;var r=e.getCursor(),i=e.getLine(r.line),s=r.ch,o=s;while(s&&n.test(i.charAt(s-1)))--s;while(o<i.length&&n.test(i.charAt(o)))++o;if(s<o)e.addOverlay(t.overlay=a(i.slice(s,o),n,t.style));return}if(e.getCursor("head").line!=e.getCursor("anchor").line)return;var u=e.getSelections()[0].replace(/^\s+|\s+$/g,"");if(u.length>=t.minChars)e.addOverlay(t.overlay=a(u,false,t.style))})}function u(e,t){return(!e.start||!t.test(e.string.charAt(e.start-1)))&&(e.pos==e.string.length||!t.test(e.string.charAt(e.pos)))}function a(e,t,n){return{token:function(r){if(r.match(e)&&(!t||u(r,t)))return n;r.next();r.skipTo(e.charAt(0))||r.skipToEnd()}}}var t=2;var n="matchhighlight";var r=100;e.defineOption("highlightSelectionMatches",false,function(t,n,r){if(r&&r!=e.Init){var u=t.state.matchHighlighter.overlay;if(u)t.removeOverlay(u);clearTimeout(t.state.matchHighlighter.timeout);t.state.matchHighlighter=null;t.off("cursorActivity",s)}if(n){t.state.matchHighlighter=new i(n);o(t);t.on("cursorActivity",s)}})})