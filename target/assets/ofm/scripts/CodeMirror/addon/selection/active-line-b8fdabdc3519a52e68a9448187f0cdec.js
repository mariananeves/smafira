(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";function r(e){for(var r=0;r<e.state.activeLines.length;r++){e.removeLineClass(e.state.activeLines[r],"wrap",t);e.removeLineClass(e.state.activeLines[r],"background",n)}}function i(e,t){if(e.length!=t.length)return false;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return false;return true}function s(e,s){var o=[];for(var u=0;u<s.length;u++){var a=e.getLineHandleVisualStart(s[u].head.line);if(o[o.length-1]!=a)o.push(a)}if(i(e.state.activeLines,o))return;e.operation(function(){r(e);for(var i=0;i<o.length;i++){e.addLineClass(o[i],"wrap",t);e.addLineClass(o[i],"background",n)}e.state.activeLines=o})}function o(e,t){s(e,t.ranges)}var t="CodeMirror-activeline";var n="CodeMirror-activeline-background";e.defineOption("styleActiveLine",false,function(t,n,i){var u=i&&i!=e.Init;if(n&&!u){t.state.activeLines=[];s(t,t.listSelections());t.on("beforeSelectionChange",o)}else if(!n&&u){t.off("beforeSelectionChange",o);r(t);delete t.state.activeLines}})})