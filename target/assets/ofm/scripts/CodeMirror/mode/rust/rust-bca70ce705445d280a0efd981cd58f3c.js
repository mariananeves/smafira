(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("rust",function(){function u(e,t){s=e;return t}function a(e,t){var n=e.next();if(n=='"'){t.tokenize=f;return t.tokenize(e,t)}if(n=="'"){s="atom";if(e.eat("\\")){if(e.skipTo("'")){e.next();return"string"}else{return"error"}}else{e.next();return e.eat("'")?"string":"error"}}if(n=="/"){if(e.eat("/")){e.skipToEnd();return"comment"}if(e.eat("*")){t.tokenize=l(1);return t.tokenize(e,t)}}if(n=="#"){if(e.eat("[")){s="open-attr";return null}e.eatWhile(/\w/);return u("macro","meta")}if(n==":"&&e.match(":<")){return u("op",null)}if(n.match(/\d/)||n=="."&&e.eat(/\d/)){var r=false;if(!e.match(/^x[\da-f]+/i)&&!e.match(/^b[01]+/)){e.eatWhile(/\d/);if(e.eat(".")){r=true;e.eatWhile(/\d/)}if(e.match(/^e[+\-]?\d+/i)){r=true}}if(r)e.match(/^f(?:32|64)/);else e.match(/^[ui](?:8|16|32|64)/);return u("atom","number")}if(n.match(/[()\[\]{}:;,]/))return u(n,null);if(n=="-"&&e.eat(">"))return u("->",null);if(n.match(i)){e.eatWhile(i);return u("op",null)}e.eatWhile(/\w/);o=e.current();if(e.match(/^::\w/)){e.backUp(1);return u("prefix","variable-2")}if(t.keywords.propertyIsEnumerable(o))return u(t.keywords[o],o.match(/true|false/)?"atom":"keyword");return u("name","variable")}function f(e,t){var n,r=false;while(n=e.next()){if(n=='"'&&!r){t.tokenize=a;return u("atom","string")}r=!r&&n=="\\"}return u("op","string")}function l(e){return function(t,n){var r=null,i;while(i=t.next()){if(i=="/"&&r=="*"){if(e==1){n.tokenize=a;break}else{n.tokenize=l(e-1);return n.tokenize(t,n)}}if(i=="*"&&r=="/"){n.tokenize=l(e+1);return n.tokenize(t,n)}r=i}return"comment"}}function h(){for(var e=arguments.length-1;e>=0;e--)c.cc.push(arguments[e])}function p(){h.apply(null,arguments);return true}function d(e,t){var n=function(){var n=c.state;n.lexical={indented:n.indented,column:c.stream.column(),type:e,prev:n.lexical,info:t}};n.lex=true;return n}function v(){var e=c.state;if(e.lexical.prev){if(e.lexical.type==")")e.indented=e.lexical.indented;e.lexical=e.lexical.prev}}function m(){c.state.keywords=r}function g(){c.state.keywords=n}function y(e,t){function n(r){if(r==",")return p(e,n);if(r==t)return p();return p(n)}return function(r){if(r==t)return p();return h(e,n)}}function b(e,t){return p(d("stat",t),e,v,w)}function w(e){if(e=="}")return p();if(e=="let")return b(L,"let");if(e=="fn")return b(_);if(e=="type")return p(d("stat"),D,E,v,w);if(e=="enum")return b(P);if(e=="mod")return b(B);if(e=="iface")return b(j);if(e=="impl")return b(F);if(e=="open-attr")return p(d("]"),y(S,"]"),v);if(e=="ignore"||e.match(/[\]\);,]/))return p(w);return h(d("stat"),S,v,E,w)}function E(e){if(e==";")return p();return h()}function S(e){if(e=="atom"||e=="name")return p(x);if(e=="{")return p(d("}"),N,v);if(e.match(/[\[\(]/))return Q(e,S);if(e.match(/[\]\)\};,]/))return h();if(e=="if-style")return p(S,S);if(e=="else-style"||e=="op")return p(S);if(e=="for")return p(W,O,M,S,S);if(e=="alt")return p(S,V);if(e=="fn")return p(_);if(e=="macro")return p(K);return p()}function x(e){if(o==".")return p(T);if(o=="::<"){return p(I,x)}if(e=="op"||o==":")return p(S);if(e=="("||e=="[")return Q(e,S);return h()}function T(){if(o.match(/^\w+$/)){c.marked="variable";return p(x)}return h(S)}function N(e){if(e=="op"){if(o=="|")return p(k,v,d("}","block"),w);if(o=="||")return p(v,d("}","block"),w)}if(o=="mutable"||o.match(/^\w+$/)&&c.stream.peek()==":"&&!c.stream.match("::",false))return h(C(S));return h(w)}function C(e){function t(n){if(o=="mutable"||o=="with"){c.marked="keyword";return p(t)}if(o.match(/^\w*$/)){c.marked="variable";return p(t)}if(n==":")return p(e,t);if(n=="}")return p();return p(t)}return t}function k(e){if(e=="name"){c.marked="def";return p(k)}if(e=="op"&&o=="|")return p();return p(k)}function L(e){if(e.match(/[\]\)\};]/))return p();if(o=="=")return p(S,A);if(e==",")return p(L);return h(W,O,L)}function A(e){if(e.match(/[\]\)\};,]/))return h(L);else return h(S,A)}function O(e){if(e==":")return p(m,R,g);return h()}function M(e){if(e=="name"&&o=="in"){c.marked="keyword";return p()}return h()}function _(e){if(o=="@"||o=="~"){c.marked="keyword";return p(_)}if(e=="name"){c.marked="def";return p(_)}if(o=="<")return p(I,_);if(e=="{")return h(S);if(e=="(")return p(d(")"),y(q,")"),v,_);if(e=="->")return p(m,R,g,_);if(e==";")return p();return p(_)}function D(e){if(e=="name"){c.marked="def";return p(D)}if(o=="<")return p(I,D);if(o=="=")return p(m,R,g);return p(D)}function P(e){if(e=="name"){c.marked="def";return p(P)}if(o=="<")return p(I,P);if(o=="=")return p(m,R,g,E);if(e=="{")return p(d("}"),m,H,g,v);return p(P)}function H(e){if(e=="}")return p();if(e=="(")return p(d(")"),y(R,")"),v,H);if(o.match(/^\w+$/))c.marked="def";return p(H)}function B(e){if(e=="name"){c.marked="def";return p(B)}if(e=="{")return p(d("}"),w,v);return h()}function j(e){if(e=="name"){c.marked="def";return p(j)}if(o=="<")return p(I,j);if(e=="{")return p(d("}"),w,v);return h()}function F(e){if(o=="<")return p(I,F);if(o=="of"||o=="for"){c.marked="keyword";return p(R,F)}if(e=="name"){c.marked="def";return p(F)}if(e=="{")return p(d("}"),w,v);return h()}function I(){if(o==">")return p();if(o==",")return p(I);if(o==":")return p(R,I);return h(R,I)}function q(e){if(e=="name"){c.marked="def";return p(q)}if(e==":")return p(m,R,g);return h()}function R(e){if(e=="name"){c.marked="variable-3";return p(U)}if(o=="mutable"){c.marked="keyword";return p(R)}if(e=="atom")return p(U);if(e=="op"||e=="obj")return p(R);if(e=="fn")return p(z);if(e=="{")return p(d("{"),C(R),v);return Q(e,R)}function U(){if(o=="<")return p(I);return h()}function z(e){if(e=="(")return p(d("("),y(R,")"),v,z);if(e=="->")return p(R);return h()}function W(e){if(e=="name"){c.marked="def";return p(X)}if(e=="atom")return p(X);if(e=="op")return p(W);if(e.match(/[\]\)\};,]/))return h();return Q(e,W)}function X(e){if(e=="op"&&o==".")return p();if(o=="to"){c.marked="keyword";return p(W)}else return h()}function V(e){if(e=="{")return p(d("}","alt"),$,v);return h()}function $(e){if(e=="}")return p();if(e=="|")return p($);if(o=="when"){c.marked="keyword";return p(S,J)}if(e.match(/[\]\);,]/))return p($);return h(W,J)}function J(e){if(e=="{")return p(d("}","alt"),w,v,$);else return h($)}function K(e){if(e.match(/[\[\(\{]/))return Q(e,S);return h()}function Q(e,t){if(e=="[")return p(d("]"),y(t,"]"),v);if(e=="(")return p(d(")"),y(t,")"),v);if(e=="{")return p(d("}"),y(t,"}"),v);return p()}function G(e,t,n){var r=e.cc;c.state=e;c.stream=t;c.marked=null,c.cc=r;while(true){var i=r.length?r.pop():w;if(i(s)){while(r.length&&r[r.length-1].lex)r.pop()();return c.marked||n}}}var e=4,t=2;var n={"if":"if-style","while":"if-style","else":"else-style","do":"else-style",ret:"else-style",fail:"else-style","break":"atom",cont:"atom","const":"let",resource:"fn",let:"let",fn:"fn","for":"for",alt:"alt",iface:"iface",impl:"impl",type:"type","enum":"enum",mod:"mod",as:"op","true":"atom","false":"atom",assert:"op",check:"op",claim:"op","native":"ignore",unsafe:"ignore","import":"else-style","export":"else-style",copy:"op",log:"op",log_err:"op",use:"op",bind:"op",self:"atom"};var r=function(){var e={fn:"fn",block:"fn",obj:"obj"};var t="bool uint int i8 i16 i32 i64 u8 u16 u32 u64 float f32 f64 str char".split(" ");for(var n=0,r=t.length;n<r;++n)e[t[n]]="atom";return e}();var i=/[+\-*&%=<>!?|\.@]/;var s,o;var c={state:null,stream:null,marked:null,cc:null};v.lex=m.lex=g.lex=true;return{startState:function(){return{tokenize:a,cc:[],lexical:{indented:-e,column:0,type:"top",align:false},keywords:n,indented:0}},token:function(e,t){if(e.sol()){if(!t.lexical.hasOwnProperty("align"))t.lexical.align=false;t.indented=e.indentation()}if(e.eatSpace())return null;s=o=null;var n=t.tokenize(e,t);if(n=="comment")return n;if(!t.lexical.hasOwnProperty("align"))t.lexical.align=true;if(s=="prefix")return n;if(!o)o=e.current();return G(t,e,n)},indent:function(n,r){if(n.tokenize!=a)return 0;var i=r&&r.charAt(0),s=n.lexical,o=s.type,u=i==o;if(o=="stat")return s.indented+e;if(s.align)return s.column+(u?0:1);return s.indented+(u?0:s.info=="alt"?t:e)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});e.defineMIME("text/x-rustsrc","rust")})