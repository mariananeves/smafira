(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("commonlisp",function(e){function s(e){var t;while(t=e.next()){if(t=="\\")e.next();else if(!r.test(t)){e.backUp(1);break}}return e.current()}function o(e,t){if(e.eatSpace()){i="ws";return null}if(e.match(n))return"number";var r=e.next();if(r=="\\")r=e.next();if(r=='"')return(t.tokenize=u)(e,t);else if(r=="("){i="open";return"bracket"}else if(r==")"||r=="]"){i="close";return"bracket"}else if(r==";"){e.skipToEnd();i="ws";return"comment"}else if(/['`,@]/.test(r))return null;else if(r=="|"){if(e.skipTo("|")){e.next();return"symbol"}else{e.skipToEnd();return"error"}}else if(r=="#"){var r=e.next();if(r=="["){i="open";return"bracket"}else if(/[+\-=\.']/.test(r))return null;else if(/\d/.test(r)&&e.match(/^\d*#/))return null;else if(r=="|")return(t.tokenize=a)(e,t);else if(r==":"){s(e);return"meta"}else return"error"}else{var o=s(e);if(o==".")return null;i="symbol";if(o=="nil"||o=="t")return"atom";if(o.charAt(0)==":")return"keyword";if(o.charAt(0)=="&")return"variable-2";return"variable"}}function u(e,t){var n=false,r;while(r=e.next()){if(r=='"'&&!n){t.tokenize=o;break}n=!n&&r=="\\"}return"string"}function a(e,t){var n,r;while(n=e.next()){if(n=="#"&&r=="|"){t.tokenize=o;break}r=n}i="ws";return"comment"}var t=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/;var n=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/;var r=/[^\s'`,@()\[\]";]/;var i;return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},tokenize:o}},token:function(n,r){if(n.sol()&&typeof r.ctx.indentTo!="number")r.ctx.indentTo=r.ctx.start+1;i=null;var s=r.tokenize(n,r);if(i!="ws"){if(r.ctx.indentTo==null){if(i=="symbol"&&t.test(n.current()))r.ctx.indentTo=r.ctx.start+e.indentUnit;else r.ctx.indentTo="next"}else if(r.ctx.indentTo=="next"){r.ctx.indentTo=n.column()}}if(i=="open")r.ctx={prev:r.ctx,start:n.column(),indentTo:null};else if(i=="close")r.ctx=r.ctx.prev||r.ctx;return s},indent:function(e,t){var n=e.ctx.indentTo;return typeof n=="number"?n:e.ctx.start+1},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}});e.defineMIME("text/x-common-lisp","commonlisp")})