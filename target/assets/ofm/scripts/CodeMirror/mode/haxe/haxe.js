(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("haxe",function(e,t){function s(e,t,n){t.tokenize=n;return n(e,t)}function o(e,t){var n=false,r;while((r=e.next())!=null){if(r==t&&!n)return false;n=!n&&r=="\\"}return n}function f(e,t,n){u=e;a=n;return t}function l(e,t){var n=e.next();if(n=='"'||n=="'")return s(e,t,c(n));else if(/[\[\]{}\(\),;\:\.]/.test(n))return f(n);else if(n=="0"&&e.eat(/x/i)){e.eatWhile(/[\da-f]/i);return f("number","number")}else if(/\d/.test(n)||n=="-"&&e.eat(/\d/)){e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return f("number","number")}else if(t.reAllowed&&n=="~"&&e.eat(/\//)){o(e,"/");e.eatWhile(/[gimsu]/);return f("regexp","string-2")}else if(n=="/"){if(e.eat("*")){return s(e,t,h)}else if(e.eat("/")){e.skipToEnd();return f("comment","comment")}else{e.eatWhile(i);return f("operator",null,e.current())}}else if(n=="#"){e.skipToEnd();return f("conditional","meta")}else if(n=="@"){e.eat(/:/);e.eatWhile(/[\w_]/);return f("metadata","meta")}else if(i.test(n)){e.eatWhile(i);return f("operator",null,e.current())}else{var u;if(/[A-Z]/.test(n)){e.eatWhile(/[\w_<>]/);u=e.current();return f("type","variable-3",u)}else{e.eatWhile(/[\w_]/);var u=e.current(),a=r.propertyIsEnumerable(u)&&r[u];return a&&t.kwAllowed?f(a.type,a.style,u):f("variable","variable",u)}}}function c(e){return function(t,n){if(!o(t,e))n.tokenize=l;return f("string","string")}}function h(e,t){var n=false,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=l;break}n=r=="*"}return f("comment","comment")}function d(e,t,n,r,i,s){this.indented=e;this.column=t;this.type=n;this.prev=i;this.info=s;if(r!=null)this.align=r}function v(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return true}function m(e,t,n,r,i){var s=e.cc;b.state=e;b.stream=i;b.marked=null,b.cc=s;if(!e.lexical.hasOwnProperty("align"))e.lexical.align=true;while(true){var o=s.length?s.pop():A;if(o(n,r)){while(s.length&&s[s.length-1].lex)s.pop()();if(b.marked)return b.marked;if(n=="variable"&&v(e,r))return"variable-2";if(n=="variable"&&g(e,r))return"variable-3";return t}}}function g(e,t){if(/[a-z]/.test(t.charAt(0)))return false;var n=e.importedtypes.length;for(var r=0;r<n;r++)if(e.importedtypes[r]==t)return true}function y(e){var t=b.state;for(var n=t.importedtypes;n;n=n.next)if(n.name==e)return;t.importedtypes={name:e,next:t.importedtypes}}function w(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function E(){w.apply(null,arguments);return true}function S(e){var t=b.state;if(t.context){b.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function T(){if(!b.state.context)b.state.localVars=x;b.state.context={prev:b.state.context,vars:b.state.localVars}}function N(){b.state.localVars=b.state.context.vars;b.state.context=b.state.context.prev}function C(e,t){var n=function(){var n=b.state;n.lexical=new d(n.indented,b.stream.column(),e,null,n.lexical,t)};n.lex=true;return n}function k(){var e=b.state;if(e.lexical.prev){if(e.lexical.type==")")e.indented=e.lexical.indented;e.lexical=e.lexical.prev}}function L(e){function t(n){if(n==e)return E();else if(e==";")return w();else return E(t)}return t}function A(e){if(e=="@")return E(P);if(e=="var")return E(C("vardef"),z,L(";"),k);if(e=="keyword a")return E(C("form"),O,A,k);if(e=="keyword b")return E(C("form"),A,k);if(e=="{")return E(C("}"),T,U,k,N);if(e==";")return E();if(e=="attribute")return E(D);if(e=="function")return E($);if(e=="for")return E(C("form"),L("("),C(")"),X,L(")"),k,A,k);if(e=="variable")return E(C("stat"),F);if(e=="switch")return E(C("form"),O,C("}","switch"),L("{"),U,k,k);if(e=="case")return E(O,L(":"));if(e=="default")return E(L(":"));if(e=="catch")return E(C("form"),T,L("("),G,L(")"),A,k,N);if(e=="import")return E(B,L(";"));if(e=="typedef")return E(j);return w(C("stat"),O,L(";"),k)}function O(e){if(p.hasOwnProperty(e))return E(_);if(e=="function")return E($);if(e=="keyword c")return E(M);if(e=="(")return E(C(")"),M,L(")"),k,_);if(e=="operator")return E(O);if(e=="[")return E(C("]"),R(O,"]"),k,_);if(e=="{")return E(C("}"),R(q,"}"),k,_);return E()}function M(e){if(e.match(/[;\}\)\],]/))return w();return w(O)}function _(e,t){if(e=="operator"&&/\+\+|--/.test(t))return E(_);if(e=="operator"||e==":")return E(O);if(e==";")return;if(e=="(")return E(C(")"),R(O,")"),k,_);if(e==".")return E(I,_);if(e=="[")return E(C("]"),O,L("]"),k,_)}function D(e){if(e=="attribute")return E(D);if(e=="function")return E($);if(e=="var")return E(z)}function P(e){if(e==":")return E(P);if(e=="variable")return E(P);if(e=="(")return E(C(")"),R(H,")"),k,A)}function H(e){if(e=="variable")return E()}function B(e,t){if(e=="variable"&&/[A-Z]/.test(t.charAt(0))){y(t);return E()}else if(e=="variable"||e=="property"||e==".")return E(B)}function j(e,t){if(e=="variable"&&/[A-Z]/.test(t.charAt(0))){y(t);return E()}else if(e=="type"&&/[A-Z]/.test(t.charAt(0))){return E()}}function F(e){if(e==":")return E(k,A);return w(_,L(";"),k)}function I(e){if(e=="variable"){b.marked="property";return E()}}function q(e){if(e=="variable")b.marked="property";if(p.hasOwnProperty(e))return E(L(":"),O)}function R(e,t){function n(r){if(r==",")return E(e,n);if(r==t)return E();return E(L(t))}return function(r){if(r==t)return E();else return w(e,n)}}function U(e){if(e=="}")return E();return w(A,U)}function z(e,t){if(e=="variable"){S(t);return E(J,W)}return E()}function W(e,t){if(t=="=")return E(O,W);if(e==",")return E(z)}function X(e,t){if(e=="variable"){S(t)}return E(C(")"),T,V,O,k,A,N)}function V(e,t){if(t=="in")return E()}function $(e,t){if(e=="variable"){S(t);return E($)}if(t=="new")return E($);if(e=="(")return E(C(")"),T,R(G,")"),k,J,A,N)}function J(e){if(e==":")return E(K)}function K(e){if(e=="type")return E();if(e=="variable")return E();if(e=="{")return E(C("}"),R(Q,"}"),k)}function Q(e){if(e=="variable")return E(J)}function G(e,t){if(e=="variable"){S(t);return E(J)}}var n=e.indentUnit;var r=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c");var i=e("operator"),s={type:"atom",style:"atom"},o={type:"attribute",style:"attribute"};var u=e("typedef");return{"if":t,"while":t,"else":n,"do":n,"try":n,"return":r,"break":r,"continue":r,"new":r,"throw":r,"var":e("var"),inline:o,"static":o,using:e("import"),"public":o,"private":o,cast:e("cast"),"import":e("import"),macro:e("macro"),"function":e("function"),"catch":e("catch"),untyped:e("untyped"),callback:e("cb"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,never:e("property_access"),trace:e("trace"),"class":u,"enum":u,"interface":u,typedef:u,"extends":u,"implements":u,dynamic:u,"true":s,"false":s,"null":s}}();var i=/[+\-*&%=<>!?|]/;var u,a;var p={atom:true,number:true,variable:true,string:true,regexp:true};var b={state:null,column:null,marked:null,cc:null};var x={name:"this",next:null};k.lex=true;return{startState:function(e){var r=["Int","Float","String","Void","Std","Bool","Dynamic","Array"];return{tokenize:l,reAllowed:true,kwAllowed:true,cc:[],lexical:new d((e||0)-n,0,"block",false),localVars:t.localVars,importedtypes:r,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){if(e.sol()){if(!t.lexical.hasOwnProperty("align"))t.lexical.align=false;t.indented=e.indentation()}if(e.eatSpace())return null;var n=t.tokenize(e,t);if(u=="comment")return n;t.reAllowed=!!(u=="operator"||u=="keyword c"||u.match(/^[\[{}\(,;:]$/));t.kwAllowed=u!=".";return m(t,n,u,a,e)},indent:function(e,t){if(e.tokenize!=l)return 0;var r=t&&t.charAt(0),i=e.lexical;if(i.type=="stat"&&r=="}")i=i.prev;var s=i.type,o=r==s;if(s=="vardef")return i.indented+4;else if(s=="form"&&r=="{")return i.indented;else if(s=="stat"||s=="form")return i.indented+n;else if(i.info=="switch"&&!o)return i.indented+(/^(?:case|default)\b/.test(t)?n:2*n);else if(i.align)return i.column+(o?0:1);else return i.indented+(o?0:n)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});e.defineMIME("text/x-haxe","haxe")})