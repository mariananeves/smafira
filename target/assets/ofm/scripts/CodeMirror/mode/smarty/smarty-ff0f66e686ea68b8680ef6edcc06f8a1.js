(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("smarty",function(e){"use strict";var t={rightDelimiter:"}",leftDelimiter:"{",smartyVersion:2};if(e.hasOwnProperty("leftDelimiter")){t.leftDelimiter=e.leftDelimiter}if(e.hasOwnProperty("rightDelimiter")){t.rightDelimiter=e.rightDelimiter}if(e.hasOwnProperty("smartyVersion")&&e.smartyVersion===3){t.smartyVersion=3}var n=["debug","extends","function","include","literal"];var r;var i={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/};var s={cont:function(e,t){r=t;return e},chain:function(e,t,n){t.tokenize=n;return n(e,t)}};var o={tokenizer:function(e,n){if(e.match(t.leftDelimiter,true)){if(e.eat("*")){return s.chain(e,n,o.inBlock("comment","*"+t.rightDelimiter))}else{n.depth++;var i=e.eol();var u=/\s/.test(e.peek());if(t.smartyVersion===3&&t.leftDelimiter==="{"&&(i||u)){n.depth--;return null}else{n.tokenize=o.smarty;r="startTag";return"tag"}}}else{e.next();return null}},smarty:function(e,u){if(e.match(t.rightDelimiter,true)){if(t.smartyVersion===3){u.depth--;if(u.depth<=0){u.tokenize=o.tokenizer}}else{u.tokenize=o.tokenizer}return s.cont("tag",null)}if(e.match(t.leftDelimiter,true)){u.depth++;return s.cont("tag","startTag")}var a=e.next();if(a=="$"){e.eatWhile(i.validIdentifier);return s.cont("variable-2","variable")}else if(a=="|"){return s.cont("operator","pipe")}else if(a=="."){return s.cont("operator","property")}else if(i.stringChar.test(a)){u.tokenize=o.inAttribute(a);return s.cont("string","string")}else if(i.operatorChars.test(a)){e.eatWhile(i.operatorChars);return s.cont("operator","operator")}else if(a=="["||a=="]"){return s.cont("bracket","bracket")}else if(a=="("||a==")"){return s.cont("bracket","operator")}else if(/\d/.test(a)){e.eatWhile(/\d/);return s.cont("number","number")}else{if(u.last=="variable"){if(a=="@"){e.eatWhile(i.validIdentifier);return s.cont("property","property")}else if(a=="|"){e.eatWhile(i.validIdentifier);return s.cont("qualifier","modifier")}}else if(u.last=="pipe"){e.eatWhile(i.validIdentifier);return s.cont("qualifier","modifier")}else if(u.last=="whitespace"){e.eatWhile(i.validIdentifier);return s.cont("attribute","modifier")}if(u.last=="property"){e.eatWhile(i.validIdentifier);return s.cont("property",null)}else if(/\s/.test(a)){r="whitespace";return null}var f="";if(a!="/"){f+=a}var l=null;while(l=e.eat(i.validIdentifier)){f+=l}for(var c=0,h=n.length;c<h;c++){if(n[c]==f){return s.cont("keyword","keyword")}}if(/\s/.test(a)){return null}return s.cont("tag","tag")}},inAttribute:function(e){return function(t,n){var r=null;var i=null;while(!t.eol()){i=t.peek();if(t.next()==e&&r!=="\\"){n.tokenize=o.smarty;break}r=i}return"string"}},inBlock:function(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=o.tokenizer;break}n.next()}return e}}};return{startState:function(){return{tokenize:o.tokenizer,mode:"smarty",last:null,depth:0}},token:function(e,t){var n=t.tokenize(e,t);t.last=r;return n},electricChars:""}});e.defineMIME("text/x-smarty","smarty")})