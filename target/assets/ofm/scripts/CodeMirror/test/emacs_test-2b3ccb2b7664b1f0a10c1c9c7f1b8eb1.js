(function(){"use strict";function n(e){var n=t[o];if(n)return n;var r,i,s;var o=e.replace(/\w+-/g,function(e){if(e=="Ctrl-")r=true;else if(e=="Alt-")s=true;else if(e=="Shift-")i=true;return""});var u;for(var a in CodeMirror.keyNames)if(CodeMirror.keyNames[a]==o){u=a;break}if(a==null)throw new Error("Unknown key: "+o);return t[e]={type:"keydown",keyCode:u,ctrlKey:r,shiftKey:i,altKey:s,preventDefault:function(){},stopPropagation:function(){}}}function r(t,r){var i=Array.prototype.slice.call(arguments,2);testCM(t,function(t){for(var r=0;r<i.length;++r){var s=i[r];if(s instanceof e)t.setCursor(s);else if(s.call)s(t);else t.triggerOnKeyDown(n(s))}},{keyMap:"emacs",value:r,mode:"javascript"})}function i(t,n){return function(r){eqPos(r.getCursor(),e(t,n))}}function s(e){return function(t){eq(t.getValue(),e)}}var e=CodeMirror.Pos;namespace="emacs_";var t={};r("motionHSimple","abc","Ctrl-F","Ctrl-F","Ctrl-B",i(0,1));r("motionHMulti","abcde","Ctrl-4","Ctrl-F",i(0,4),"Ctrl--","Ctrl-2","Ctrl-F",i(0,2),"Ctrl-5","Ctrl-B",i(0,0));r("motionHWord","abc. def ghi","Alt-F",i(0,3),"Alt-F",i(0,8),"Ctrl-B","Alt-B",i(0,5),"Alt-B",i(0,0));r("motionHWordMulti","abc. def ghi ","Ctrl-3","Alt-F",i(0,12),"Ctrl-2","Alt-B",i(0,5),"Ctrl--","Alt-B",i(0,8));r("motionVSimple","a\nb\nc\n","Ctrl-N","Ctrl-N","Ctrl-P",i(1,0));r("motionVMulti","a\nb\nc\nd\ne\n","Ctrl-2","Ctrl-N",i(2,0),"Ctrl-F","Ctrl--","Ctrl-N",i(1,1),"Ctrl--","Ctrl-3","Ctrl-P",i(4,1));r("killYank","abc\ndef\nghi","Ctrl-F","Ctrl-Space","Ctrl-N","Ctrl-N","Ctrl-W","Ctrl-E","Ctrl-Y",s("ahibc\ndef\ng"));r("killRing","abcdef","Ctrl-Space","Ctrl-F","Ctrl-W","Ctrl-Space","Ctrl-F","Ctrl-W","Ctrl-Y","Alt-Y",s("acdef"));r("copyYank","abcd","Ctrl-Space","Ctrl-E","Alt-W","Ctrl-Y",s("abcdabcd"));r("killLineSimple","foo\nbar","Ctrl-F","Ctrl-K",s("f\nbar"));r("killLineEmptyLine","foo\n  \nbar","Ctrl-N","Ctrl-K",s("foo\nbar"));r("killLineMulti","foo\nbar\nbaz","Ctrl-F","Ctrl-F","Ctrl-K","Ctrl-K","Ctrl-K","Ctrl-A","Ctrl-Y",s("o\nbarfo\nbaz"));r("moveByParagraph","abc\ndef\n\n\nhij\nklm\n\n","Ctrl-F","Ctrl-Down",i(2,0),"Ctrl-Down",i(6,0),"Ctrl-N","Ctrl-Up",i(3,0),"Ctrl-Up",i(0,0),e(1,2),"Ctrl-Down",i(2,0),e(4,2),"Ctrl-Up",i(3,0));r("moveByParagraphMulti","abc\n\ndef\n\nhij\n\nklm","Ctrl-U","2","Ctrl-Down",i(3,0),"Shift-Alt-.","Ctrl-3","Ctrl-Up",i(1,0));r("moveBySentence","sentence one! sentence\ntwo\n\nparagraph two","Alt-E",i(0,13),"Alt-E",i(1,3),"Ctrl-F","Alt-A",i(0,13));r("moveByExpr","function foo(a, b) {}","Ctrl-Alt-F",i(0,8),"Ctrl-Alt-F",i(0,12),"Ctrl-Alt-F",i(0,18),"Ctrl-Alt-B",i(0,12),"Ctrl-Alt-B",i(0,9));r("moveByExprMulti","foo bar baz bug","Ctrl-2","Ctrl-Alt-F",i(0,7),"Ctrl--","Ctrl-Alt-F",i(0,4),"Ctrl--","Ctrl-2","Ctrl-Alt-B",i(0,11));r("delExpr","var x = [\n  a,\n  b\n  c\n];",e(0,8),"Ctrl-Alt-K",s("var x = ;"),"Ctrl-/",e(4,1),"Ctrl-Alt-Backspace",s("var x = ;"));r("delExprMulti","foo bar baz","Ctrl-2","Ctrl-Alt-K",s(" baz"),"Ctrl-/","Ctrl-E","Ctrl-2","Ctrl-Alt-Backspace",s("foo "));r("justOneSpace","hi      bye  ",e(0,4),"Alt-Space",s("hi bye  "),e(0,4),"Alt-Space",s("hi b ye  "),"Ctrl-A","Alt-Space","Ctrl-E","Alt-Space",s(" hi b ye "));r("openLine","foo bar","Alt-F","Ctrl-O",s("foo\n bar"));r("transposeChar","abcd\n\ne","Ctrl-F","Ctrl-T","Ctrl-T",s("bcad\n\ne"),i(0,3),"Ctrl-F","Ctrl-T","Ctrl-T","Ctrl-T",s("bcda\n\ne"),i(0,4),"Ctrl-F","Ctrl-T",s("bcd\na\ne"),i(1,1));r("manipWordCase","foo BAR bAZ","Alt-C","Alt-L","Alt-U",s("Foo bar BAZ"),"Ctrl-A","Alt-U","Alt-L","Alt-C",s("FOO bar Baz"));r("manipWordCaseMulti","foo Bar bAz","Ctrl-2","Alt-U",s("FOO BAR bAz"),"Ctrl-A","Ctrl-3","Alt-C",s("Foo Bar Baz"));r("upExpr","foo {\n  bar[];\n  baz(blah);\n}",e(2,7),"Ctrl-Alt-U",i(2,5),"Ctrl-Alt-U",i(0,4));r("transposeExpr","do foo[bar] dah",e(0,6),"Ctrl-Alt-T",s("do [bar]foo dah"));r("clearMark","abcde",e(0,2),"Ctrl-Space","Ctrl-F","Ctrl-F","Ctrl-G","Ctrl-W",s("abcde"));testCM("save",function(e){var t=false;CodeMirror.commands.save=function(e){t=e.getValue()};e.triggerOnKeyDown(n("Ctrl-X"));e.triggerOnKeyDown(n("Ctrl-S"));is(t,"hi")},{value:"hi",keyMap:"emacs"})})()