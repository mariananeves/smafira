(function(){"use strict";function e(e){var t=Array.prototype.slice.call(arguments,1,arguments.length-1).join("\n");var n=arguments[arguments.length-1];return window.test("search_"+e,function(){n(new CodeMirror.Doc(t))})}function t(e,t,n){var r=e.getSearchCursor(t,null,n);for(var i=3;i<arguments.length;i+=4){var s=r.findNext();is(s,"not enough results (forward)");eqPos(Pos(arguments[i],arguments[i+1]),r.from(),"from, forward, "+(i-3)/4);eqPos(Pos(arguments[i+2],arguments[i+3]),r.to(),"to, forward, "+(i-3)/4)}is(!r.findNext(),"too many matches (forward)");for(var i=arguments.length-4;i>=3;i-=4){var s=r.findPrevious();is(s,"not enough results (backwards)");eqPos(Pos(arguments[i],arguments[i+1]),r.from(),"from, backwards, "+(i-3)/4);eqPos(Pos(arguments[i+2],arguments[i+3]),r.to(),"to, backwards, "+(i-3)/4)}is(!r.findPrevious(),"too many matches (backwards)")}e("simple","abcdefg","abcdefg",function(e){t(e,"cde",false,0,2,0,5,1,2,1,5)});e("multiline","hallo","goodbye",function(e){t(e,"llo\ngoo",false,0,2,1,3);t(e,"blah\nhall",false);t(e,"bye\neye",false)});e("regexp","abcde","abcde",function(e){t(e,/bcd/,false,0,1,0,4,1,1,1,4);t(e,/BCD/,false);t(e,/BCD/i,false,0,1,0,4,1,1,1,4)});e("insensitive","hallo","HALLO","oink","hAllO",function(e){t(e,"All",false,3,1,3,4);t(e,"All",true,0,1,0,4,1,1,1,4,3,1,3,4)});e("multilineInsensitive","zie ginds komT","De Stoomboot","uit Spanje weer aan",function(e){t(e,"komt\nde stoomboot\nuit",false);t(e,"komt\nde stoomboot\nuit",true,0,10,2,3);t(e,"kOMt\ndE stOOmboot\nuiT",true,0,10,2,3)});e("expandingCaseFold","<b>İİ İİ</b>","<b>uu uu</b>",function(e){if(phantom)return;t(e,"</b>",true,0,8,0,12,1,8,1,12);t(e,"İİ",true,0,3,0,5,0,6,0,8)})})()