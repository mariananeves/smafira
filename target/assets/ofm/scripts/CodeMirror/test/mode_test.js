(function(){function e(e,t,n){for(;;){var r=e.indexOf(n,t);if(r==-1)return null;if(e.charAt(r+1)!=n)return r;t=r+2}}function n(n){var r=[],i="";for(var s=0;s<n.length;++s){if(s)i+="\n";var o=n[s],u=0;while(u<o.length){var a=null,f;if(o.charAt(u)=="["&&o.charAt(u+1)!="["){t.lastIndex=u+1;var l=t.exec(o);a=l[0].replace(/&/g," ");var c=u+a.length+2;var h=e(o,c,"]");if(h==null)throw new Error("Unterminated token at "+u+" in '"+o+"'"+a);f=o.slice(c,h);u=h+1}else{var h=e(o,u,"[");if(h==null)h=o.length;f=o.slice(u,h);u=h}f=f.replace(/\[\[|\]\]/g,function(e){return e.charAt(0)});r.push(a,f);i+=f}}return{tokens:r,plain:i}}function r(e){return e.replace("&","&amp;").replace("<","&lt;")}function i(e,t,n){var i=[];for(var a=0;a<t.length;a+=2){var f=t[a];if(f&&f.indexOf(" "))f=f.split(" ").sort().join(" ");i.push(f,t[a+1])}var l=s(e,n);var c="";var h=o(i,l);if(h!=null){c+='<div class="mt-test mt-fail">';c+="<pre>"+r(e)+"</pre>";c+='<div class="cm-s-default">';c+="expected:";c+=u(i,h);c+="observed:";c+=u(l,h);c+="</div>";c+="</div>"}if(l.indentFailures){for(var a=0;a<l.indentFailures.length;a++)c+="<div class='mt-test mt-fail'>"+r(l.indentFailures[a])+"</div>"}if(c)throw new Failure(c)}function s(e,t){var n=t.startState();var r=e.replace(/\r\n/g,"\n").split("\n");var i=[],s=0;for(var o=0;o<r.length;++o){var u=r[o],a=true;if(t.indent){var f=u.match(/^\s*/)[0];var l=t.indent(n,u.slice(f.length));if(l!=CodeMirror.Pass&&l!=f.length)(i.indentFailures||(i.indentFailures=[])).push("Indentation of line "+(o+1)+" is "+l+" (expected "+f.length+")")}var c=new CodeMirror.StringStream(u);if(u==""&&t.blankLine)t.blankLine(n);while(!c.eol()){var h=t.token(c,n),p=c.current();if(h&&h.indexOf(" ")>-1)h=h.split(" ").sort().join(" ");c.start=c.pos;if(s&&i[s-2]==h&&!a){i[s-1]+=p}else if(p){i[s++]=h;i[s++]=p}if(c.pos>5e3){i[s++]=null;i[s++]=this.text.slice(c.pos);break}a=false}}return i}function o(e,t){var n=Math.min(e.length,t.length);for(var r=0;r<n;++r)if(e[r]!=t[r])return r>>1;if(e.length>n||t.length>n)return n}function u(e,t){var n='<table class="mt-output">';n+="<tr>";for(var i=0;i<e.length;i+=2){var s=e[i],o=e[i+1];n+='<td class="mt-token"'+(i==t*2?" style='background: pink'":"")+">"+'<span class="cm-'+r(String(s))+'">'+r(o.replace(/ /g,"Â·"))+"</span>"+"</td>"}n+="</tr><tr>";for(var i=0;i<e.length;i+=2){n+='<td class="mt-style"><span>'+(e[i]||null)+"</span></td>"}n+="</table>";return n}var t=/[\w&-_]+/g;test.mode=function(e,t,r,s){var o=n(r);return test((s||t.name)+"_"+e,function(){return i(o.plain,o.tokens,t)})}})()